# Separated Families Template
# Best for: Divorced/separated parents managing shared kid expenses

metadata:
  template_name: Separated Families
  description: Track kids expenses, child support, and contributor accountability
  target_users: Separated parents with shared custody and expenses

rules:
  # ═══════════════════════════════════════════════════════════
  # INCOME & TRANSFERS
  # ═══════════════════════════════════════════════════════════

  - type: category
    name: Child Support Received
    patterns: [CHILD SUPPORT, CSA, CENTRELINK]
    category: Income > Child Support
    confidence: 95

  - type: label
    name: Child Support Income
    when:
      categories: [Income > Child Support]
      amount_operator: ">"
      amount_value: 0
    labels: [Child Support, Income]

  # ═══════════════════════════════════════════════════════════
  # KIDS EXPENSES - ESSENTIAL
  # ═══════════════════════════════════════════════════════════

  - type: category
    name: Kids School Expenses
    patterns: [SCHOOL, UNIFORM, TEXTBOOK, EXCURSION]
    category: Kids > Education
    confidence: 90

  - type: label
    name: Kids Essential Expense
    when:
      categories: [Kids > Education, Kids > Medical, Kids > Clothing]
    labels: [Kids Expense, Essential, Shared Responsibility]

  - type: category
    name: Kids Medical
    patterns: [DOCTOR, DENTIST, PHARMACY, CHEMIST]
    accounts: [Kids Account]
    category: Kids > Medical
    confidence: 85

  - type: category
    name: Kids Activities
    patterns: [SPORT, MUSIC LESSONS, SWIMMING, DANCE]
    category: Kids > Activities
    confidence: 85

  - type: label
    name: Kids Discretionary
    when:
      categories: [Kids > Activities, Kids > Entertainment]
    labels: [Kids Expense, Discretionary]

  # ═══════════════════════════════════════════════════════════
  # CONTRIBUTOR TRACKING
  # ═══════════════════════════════════════════════════════════

  - type: label
    name: Parent 1 Contribution
    when:
      accounts: [Parent1 Account, Joint Account]
      amount_operator: ">"
      amount_value: 0
    labels: [Contributor: Parent1]

  - type: label
    name: Parent 2 Contribution
    when:
      accounts: [Parent2 Account]
      amount_operator: ">"
      amount_value: 0
    labels: [Contributor: Parent2]

  # ═══════════════════════════════════════════════════════════
  # EXPENSE SPLITTING & RECONCILIATION
  # ═══════════════════════════════════════════════════════════

  - type: label
    name: Needs Reconciliation - Large Kids Expense
    when:
      categories: [Kids > Education, Kids > Medical, Kids > Activities]
      amount_operator: ">"
      amount_value: 100
    labels: [Needs Reconciliation, Shared Responsibility]

  - type: label
    name: Flag Uncategorized Kids Account
    when:
      accounts: [Kids Account]
      uncategorized: true
    labels: [Needs Categorization, Kids Related]
